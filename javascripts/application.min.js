var MMCQ,PriorityQueue;PriorityQueue=function(){function t(t){this.comparator=t,this.contents=[],this.sorted=!1}return t.prototype.sort=function(){return this.contents.sort(this.comparator),this.sotred=!0},t.prototype.push=function(t){return this.contents.push(t),this.sorted=!1},t.prototype.peek=function(t){return null==t&&(t=this.contents.length-1),this.sorted||this.sort(),this.contents[t]},t.prototype.pop=function(){return this.sorted||this.sort(),this.contents.pop()},t.prototype.size=function(){return this.contents.length},t.prototype.map=function(t){return this.contents.map(t)},t}(),MMCQ=function(){var g,s,u,S,l,f;function b(){this.maxIterations=1e3,this.fractByPopulations=.75}return b.rshift=8-(b.sigbits=5),S=function(t,o,e){return(t<<2*b.sigbits)+(o<<b.sigbits)+e},g=function(){function t(t,o,e,n,r,i,s){this.r1=t,this.r2=o,this.g1=e,this.g2=n,this.b1=r,this.b2=i,this.histo=s}return t.prototype.volume=function(t){return this._volume&&!t||(this._volume=(this.r2-this.r1+1)*(this.g2-this.g1+1)*(this.b2-this.b1+1)),this._volume},t.prototype.count=function(t){var o,e,n,r,i,s,a,c,h,u,l;if(!this._count_set||t){for(r=0,i=s=this.r1,h=this.r2;s<=h;i=s+=1)for(e=a=this.g1,u=this.g2;a<=u;e=a+=1)for(o=c=this.b1,l=this.b2;c<=l;o=c+=1)n=S(i,e,o),r+=this.histo[n]||0;this._count_set=!0,this._count=r}return this._count},t.prototype.copy=function(){return new t(this.r1,this.r2,this.g1,this.g2,this.b1,this.b2,this.histo)},t.prototype.average=function(t){var o,e,n,r,i,s,a,c,h,u,l,f,p,g,d,m;if(!this._average||t){for(a=1<<8-b.sigbits,e=r=h=u=0,c=l=this.r1,g=this.r2;l<=g;c=l+=1)for(n=f=this.g1,d=this.g2;f<=d;n=f+=1)for(o=p=this.b1,m=this.b2;p<=m;o=p+=1)s=S(c,n,o),u+=i=this.histo[s]||0,h+=i*(c+.5)*a,r+=i*(n+.5)*a,e+=i*(o+.5)*a;this._average=u?[~~(h/u),~~(r/u),~~(e/u)]:[~~(a*(this.r1+this.r2+1)/2),~~(a*(this.g1+this.g2+1)/2),~~(a*(this.b1+this.b2+1)/2)]}return this._average},t.prototype.contains=function(t){var o,e,n;return n=t[0]>>b.rshift,e=t[1]>>b.rshift,o=t[2]>>b.rshift,this.r1<=n&&n<=this.r2&&this.g1<=e&&e<=this.g2&&this.b1<=o&&o<=this.b2},t}(),s=function(){function t(){this.cboxes=new PriorityQueue(function(t,o){var e,n;return e=t.count()*t.volume(),(n=o.count()*o.volume())<e?1:e<n?-1:0})}return t.prototype.push=function(t){return this.cboxes.push({cbox:t,color:t.average()})},t.prototype.palette=function(){return this.cboxes.map(function(t){return t.color})},t.prototype.size=function(){return this.cboxes.size()},t.prototype.map=function(t){var o,e,n;for(o=e=0,n=this.cboxes.size();e<n;o=e+=1)return this.cboxes.peek(o).cbox.contains(t)?this.cboxes.peek(o).color:this.nearest(t)},t.prototype.cboxes=function(){return this.cboxes},t.prototype.nearest=function(t){var o,e,n,r,i,s,a;for(i=function(t){return t*t},n=1e9,e=s=0,a=this.cboxes.size();s<a;e=s+=1)(o=Math.sqrt(i(t[0]-this.cboxes.peek(e).color[0])+i(t[1]-this.cboxes.peek(e).color[1])+i(t[2]-this.cboxes.peek(e).color[2])))<n&&(n=o,r=this.cboxes.peek(e).color);return r},t}(),l=function(t){var o,e,n,r,i,s,a,c;for(n=new Array(1<<3*b.sigbits),a=0,c=t.length;a<c;a++)s=(i=t[a])[0]>>b.rshift,e=i[1]>>b.rshift,o=i[2]>>b.rshift,n[r=S(s,e,o)]=(n[r]||0)+1;return n},u=function(t,o){var e,n,r,i,s,a,c,h,u,l,f,p;for(r=a=l=1e6,f=n=s=u=0,p=t.length;f<p;f++)(h=(c=t[f])[0]>>b.rshift)<l?l=h:u<h&&(u=h),(i=c[1]>>b.rshift)<a?a=i:s<i&&(s=i),(e=c[2]>>b.rshift)<r?r=e:n<e&&(n=e);return new g(l,u,a,s,r,n,o)},f=function(t,f){var o,e,n,r,i,p,s,g,a,c,h,d,u,l,m,b,v,y,w,C,x,k,M,P,_,j,z,B,Q,I;if(f.count()){if(1===f.count())return[f.copy()];if(c=f.r2-f.r1+1,i=f.g2-f.g1+1,e=f.b2-f.b1+1,s=Math.max(c,i,e),d=0,g=[],p=[],s===c)for(a=u=f.r1,k=f.r2;u<=k;a=u+=1){for(h=0,r=l=f.g1,z=f.g2;l<=z;r=l+=1)for(o=m=f.b1,B=f.b2;m<=B;o=m+=1)h+=t[S(a,r,o)]||0;d+=h,g[a]=d}else if(s===i)for(r=b=f.g1,Q=f.g2;b<=Q;r=b+=1){for(h=0,a=v=f.r1,I=f.r2;v<=I;a=v+=1)for(o=y=f.b1,M=f.b2;y<=M;o=y+=1)h+=t[S(a,r,o)]||0;d+=h,g[r]=d}else for(o=w=f.b1,P=f.b2;w<=P;o=w+=1){for(h=0,a=C=f.r1,_=f.r2;C<=_;a=C+=1)for(r=x=f.g1,j=f.g2;x<=j;r=x+=1)h+=t[S(a,r,o)]||0;d+=h,g[o]=d}return g.forEach(function(t,o){return p[o]=d-t}),n=function(t){var o,e,n,r,i,s,a,c,h,u,l;for(s=t+"2",a=u=f[i=t+"1"],l=f[s];u<=l;a=u+=1)if(g[a]>d/2){for(o=f.copy(),e=f.copy(),r=(c=a-f[i])<=(h=f[s]-a)?Math.min(f[s]-1,~~(a+h/2)):Math.max(f[i],~~(a-1-c/2));!g[r];)r++;for(n=p[r];!n&&g[r-1];)n=p[--r];return o[s]=r,e[i]=o[s]+1,[o,e]}},s===c?n("r"):s===i?n("g"):s===e?n("b"):void 0}},b.prototype.quantize=function(t,o){var a,e,c,n,r,i,h=this;if(!t.length||o<2||256<o)return console.log("invalid arguments"),!1;for(c=l(t),a=u(t,c),(r=new PriorityQueue(function(t,o){var e,n;return e=t.count(),(n=o.count())<e?1:e<n?-1:0})).push(a),(n=function(t,o){var e,n,r,i,s;for(i=1,s=0;s<h.maxIterations;)if((a=t.pop()).count()){if(e=(r=f(c,a))[0],n=r[1],!e)return void console.log("cbox1 not defined; shouldn't happen");if(t.push(e),n&&(t.push(n),i++),o<=i)return;if(s++>h.maxIterations)return void console.log("infinite loop; perhaps too few pixels")}else t.push(a),s++})(r,this.fractByPopulations*o),i=new PriorityQueue(function(t,o){var e,n;return e=t.count()*t.volume(),(n=o.count()*o.volume())<e?1:e<n?-1:0});r.size();)i.push(r.pop());for(n(i,o-i.size()),e=new s;i.size();)e.push(i.pop());return e},b}.call(this),function(){window.ColorExtract=function(){function m(){}return m.getColorMap=function(t,o,e,n,r,i){var s,a,c,h,u,l,f,p,g,d;for(null==i&&(i=8),c=t.getContext("2d").getImageData(o,e,n,r).data,h=[],l=f=e,g=e+r;f<g;l=f+=1)for(a=l*n*4,u=p=o,d=o+n;p<d;u=p+=1)s=a+4*u,h.push([c[s],c[s+1],c[s+2]]);return(new MMCQ).quantize(h,i)},m.colorDist=function(t,o){var e;return(e=function(t){return t*t})(t[0]-o[0])+e(t[1]-o[1])+e(t[2]-o[2])},m.extract=function(t,o,e){var n,r,i,s,a,c,h,u,l,f,p,g,d;for(o.width=25,o.height=25,o.getContext("2d").drawImage(t,0,0,o.width,o.height),(r=m.getColorMap(o,0,0,o.width,o.height,4).cboxes.map(function(t){return{count:t.cbox.count(),rgb:t.color}})).sort(function(t,o){return o.count-t.count}),n=r[0].rgb,(h=m.getColorMap(o,0,0,t.width,t.height,10).cboxes.map(function(t){return{count:t.cbox.count(),rgb:t.color}})).sort(function(t,o){return o.count-t.count}),f=u=0,g=h.length;f<g;f++)i=h[f],u<(s=m.colorDist(n,i.rgb))&&(u=s,a=i.rgb);for(p=u=0,d=h.length;p<d;p++)i=h[p],u<(s=m.colorDist(n,i.rgb))&&i.rgb!==a&&(u=s,c=i.rgb);return e({bgColor:(l=function(t){return"rgb("+t[0]+", "+t[1]+", "+t[2]+")"})(n),fgColor:l(a),fgColor2:l(c)})},m}()}.call(this),function(r){var t=function(){return r("html").hasClass("editmode")};r(".langmenu-with-popup").each(function(){var o=r(this).find(".langmenu-popup");r(this).find(".langmenu-content").click(function(){return o.show(),r(document).bind("click",function(t){r.contains(o.get(0),t.target)||(o.hide(),r(this).unbind("click",arguments.callee))}),!1})}),r("a.news-older-show").click(function(){return r(this).addClass("no-bg"),r(".news-older-hidden").show(),!1}),r(".mobile-menu-arr").click(function(t){r(t.target).closest("li").toggleClass("open")});var o=function(){r(document).ready(function(){r(".comment-form").hasClass("form_with_errors")?r("html, body").scrollTop(r(".comment-form").offset().top):0<r("form").find(".form_error, .form_notice").length&&r("html, body").scrollTop(r(".form_error, .form_notice").closest("form").offset().top)})},n=function(t,o){return function(e,n){if(e&&n){"string"==typeof e&&(e=e.replace(/rgba?\(/,"").replace(/\)/,"").split(","),r.each(e,function(t,o){e[t]=+o})),"string"==typeof n&&(n=n.replace(/rgba?\(/,"").replace(/\)/,"").split(","),r.each(n,function(t,o){n[t]=+o})),"object"==typeof e&&e.hasOwnProperty("length")&&3==e.length&&e.push(1),"object"==typeof n&&n.hasOwnProperty("length")&&3==n.length&&n.push(1);var t=[0,0,0,0];return t[3]=1-(1-n[3])*(1-e[3]),0===t[3]&&(t[3]=1e-6),t[0]=Math.min(n[0]*n[3]/t[3]+e[0]*e[3]*(1-n[3])/t[3],255),t[1]=Math.min(n[1]*n[3]/t[3]+e[1]*e[3]*(1-n[3])/t[3],255),t[2]=Math.min(n[2]*n[3]/t[3]+e[2]*e[3]*(1-n[3])/t[3],255),r.map(t,function(t){return Math.floor(t)})}}(t||[255,255,255,1],o||[255,255,255,1])},e=function(t){void 0!==t&&(.6<t?r("body").addClass("light-background").removeClass("dark-background"):r("body").addClass("dark-background").removeClass("light-background"))};getPhotoByWidth=function(t,o){for(var e,n,r=null,i=t.length;i--;)e=t[i].width-o,t[i].thumbnail&&"medium"===t[i].thumbnail||!(!r||n<0&&0<=e||(0<=n&&0<=e||n<0&&e<0)&&Math.abs(e)<Math.abs(n))||(r=t[i].url,n=e);return r},getPhotoByHeight=function(t,o){for(var e,n,r=null,i=t.length;i--;)e=t[i].height-o,t[i].thumbnail&&"medium"===t[i].thumbnail||!(!r||n<0&&0<=e||(0<=n&&0<=e||n<0&&e<0)&&Math.abs(e)<Math.abs(n))||(r=t[i].url,n=e);return r},r("html").on("click",".voog-search-modal",function(t){t.stopPropagation()}),r("html").click(function(){r(".js-popover").hasClass("expanded")&&r(".js-popover").removeClass("expanded"),r(".js-modal-overlay").hasClass("active")&&r(".js-modal-overlay").removeClass("active")});var i,s=function(){r(window).on("load",function(){a(),r(".content-body").children().length<1&&0===r(".content-body").text().trim().length&&r(".content-body").hide()}),r(window).on("resize",a),o()},a=function(){clearTimeout(i),i=setTimeout(function(){var t=parseInt(r(".content-left .content-header").parent().css("height")),o=parseFloat(r(".content-right").css("padding-top"));t+=parseInt(r(".content-left .news").parent().css("height")),r(".content-right").css("min-height",t-2*o),r(".frontpage-cover-image").removeClass("hidden"),r(".frontpage-cover-color").removeClass("hidden")},200)};r(".js-search-btn").click(function(t){t.stopPropagation(),r(this).toggleClass("open"),r(".js-search").toggleClass("active"),r(".js-modal-overlay").hasClass("active")&&r(".js-search-input").focus()}),r(".js-modal-overlay").on("click","form",function(t){t.stopPropagation()});var c,h;window.site=r.extend(window.site||{},{initBlogPage:function(){},initArticlePage:function(){o()},initCommonPage:function(){o()},initFrontPage:s,handleColorScheme:e,getCombinedLightness:function(t,o){var e=n(t,o);return Math.round((.2126*+e[0]+.7152*+e[1]+.0722*+e[2])/2.55)/100},handleHeaderColorScheme:function(t){void 0!==t&&(.6<t?r(".header-wrapper").addClass("light").removeClass("dark"):r(".header-wrapper").addClass("dark").removeClass("light"))},getPhotoByWidth:getPhotoByWidth,getPhotoByHeight:getPhotoByHeight,bindCustomTexteditorStyles:function(t){window.edy=window.edy||[],edy.push(["texteditorStyles",{name:t,tagname:"a",attribute:{href:"#"},classname:"custom-btn",toggle:!0}])},bindSiteSearch:function(t,o,e){t&&new VoogSearch(t,{per_page:10,lang:o,resultsContainer:r(".js-voog-search-modal").get(0),sideclick:!0,mobileModeWidth:752,updateOnKeypress:!0,noResults:e})}}),r(".menu-lang").find(".menu").change(function(){var t=r(this).find(":selected");window.location=t.val(),r(this).prev().text(t.text())}),r(".mobile-menu-btn").click(function(){r(this).toggleClass("open"),r(".mobile-menu-main").toggleClass("expanded")}),e(),r("html").click(function(){r(".mobile-lang-menu-popover").hasClass("expanded")&&r(".mobile-lang-menu-popover").removeClass("expanded")}),s(),t()||r(".content-formatted table").wrap('<div class="table-container overthrow"></div>'),r(".search-input").on("keyup",function(t){$input=r(t.target),27!=t.keyCode&&$input.val()&&($input.parent().find(".search-submit").hide(),$input.parent().find(".search-clear").show())}),r(".search-form").on("click",".search-clear",function(t){var o=r(t.target).closest(".search-form");o.removeClass("not-empty").find(".search-input").focus().val(""),r(t.target).hide(),r(".voog-search-modal").removeClass("search-results-active"),o.find(".search-submit").show(),o.find("input").blur()}),r(window).on("resize",function(){752<r(window).innerWidth()&&(r(".mobile-menu-btn").removeClass("open"),r(".mobile-menu-main").removeClass("expanded"))}),!Modernizr.flexbox&&t()&&(c=r(".js-header").width(),h=r(".js-header-right").width(),r(".js-header-left").css("min-width",c-h))}(jQuery);