var MMCQ,PriorityQueue;PriorityQueue=function(){function t(t){this.comparator=t,this.contents=[],this.sorted=!1}return t.prototype.sort=function(){return this.contents.sort(this.comparator),this.sotred=!0},t.prototype.push=function(t){return this.contents.push(t),this.sorted=!1},t.prototype.peek=function(t){return null==t&&(t=this.contents.length-1),this.sorted||this.sort(),this.contents[t]},t.prototype.pop=function(){return this.sorted||this.sort(),this.contents.pop()},t.prototype.size=function(){return this.contents.length},t.prototype.map=function(t){return this.contents.map(t)},t}(),MMCQ=function(){var t,o,e,n,r,i;function s(){this.maxIterations=1e3,this.fractByPopulations=.75}return s.sigbits=5,s.rshift=8-s.sigbits,n=function(t,o,e){return(t<<2*s.sigbits)+(o<<s.sigbits)+e},t=function(){function t(t,o,e,n,r,i,s){this.r1=t,this.r2=o,this.g1=e,this.g2=n,this.b1=r,this.b2=i,this.histo=s}return t.prototype.volume=function(t){return this._volume&&!t||(this._volume=(this.r2-this.r1+1)*(this.g2-this.g1+1)*(this.b2-this.b1+1)),this._volume},t.prototype.count=function(t){var o,e,r,i,s,a,c,h,u,l,f;if(!this._count_set||t){for(i=0,s=a=this.r1,u=this.r2;a<=u;s=a+=1)for(e=c=this.g1,l=this.g2;c<=l;e=c+=1)for(o=h=this.b1,f=this.b2;h<=f;o=h+=1)r=n(s,e,o),i+=this.histo[r]||0;this._count_set=!0,this._count=i}return this._count},t.prototype.copy=function(){return new t(this.r1,this.r2,this.g1,this.g2,this.b1,this.b2,this.histo)},t.prototype.average=function(t){var o,e,r,i,a,c,h,u,l,f,p,g,d,m,b,v;if(!this._average||t){for(h=1<<8-s.sigbits,f=0,l=0,i=0,e=0,u=p=this.r1,m=this.r2;p<=m;u=p+=1)for(r=g=this.g1,b=this.g2;g<=b;r=g+=1)for(o=d=this.b1,v=this.b2;d<=v;o=d+=1)c=n(u,r,o),f+=a=this.histo[c]||0,l+=a*(u+.5)*h,i+=a*(r+.5)*h,e+=a*(o+.5)*h;this._average=f?[~~(l/f),~~(i/f),~~(e/f)]:[~~(h*(this.r1+this.r2+1)/2),~~(h*(this.g1+this.g2+1)/2),~~(h*(this.b1+this.b2+1)/2)]}return this._average},t.prototype.contains=function(t){var o,e,n;return n=t[0]>>s.rshift,e=t[1]>>s.rshift,o=t[2]>>s.rshift,this.r1<=n&&n<=this.r2&&this.g1<=e&&e<=this.g2&&this.b1<=o&&o<=this.b2},t}(),o=function(){function t(){this.cboxes=new PriorityQueue(function(t,o){var e,n;return(e=t.count()*t.volume())>(n=o.count()*o.volume())?1:e<n?-1:0})}return t.prototype.push=function(t){return this.cboxes.push({cbox:t,color:t.average()})},t.prototype.palette=function(){return this.cboxes.map(function(t){return t.color})},t.prototype.size=function(){return this.cboxes.size()},t.prototype.map=function(t){var o,e,n;for(o=e=0,n=this.cboxes.size();e<n;o=e+=1)return this.cboxes.peek(o).cbox.contains(t)?this.cboxes.peek(o).color:this.nearest(t)},t.prototype.cboxes=function(){return this.cboxes},t.prototype.nearest=function(t){var o,e,n,r,i,s,a;for(i=function(t){return t*t},n=1e9,e=s=0,a=this.cboxes.size();s<a;e=s+=1)(o=Math.sqrt(i(t[0]-this.cboxes.peek(e).color[0])+i(t[1]-this.cboxes.peek(e).color[1])+i(t[2]-this.cboxes.peek(e).color[2])))<n&&(n=o,r=this.cboxes.peek(e).color);return r},t}(),r=function(t){var o,e,r,i,a,c,h,u,l;for(i=1<<3*s.sigbits,r=new Array(i),u=0,l=t.length;u<l;u++)h=(c=t[u])[0]>>s.rshift,e=c[1]>>s.rshift,o=c[2]>>s.rshift,r[a=n(h,e,o)]=(r[a]||0)+1;return r},e=function(o,e){var n,r,i,a,c,h,u,l,f,p,g,d;for(p=1e6,f=0,h=1e6,c=0,i=1e6,r=0,g=0,d=o.length;g<d;g++)l=(u=o[g])[0]>>s.rshift,a=u[1]>>s.rshift,n=u[2]>>s.rshift,l<p?p=l:l>f&&(f=l),a<h?h=a:a>c&&(c=a),n<i?i=n:n>r&&(r=n);return new t(p,f,h,c,i,r,e)},i=function(t,o){var e,r,i,s,a,c,h,u,l,f,p,g,d,m,b,v,y,w,C,x,k,M,P,_,j,z,B,Q,I,T;if(o.count()){if(1===o.count())return[o.copy()];if(f=o.r2-o.r1+1,a=o.g2-o.g1+1,r=o.b2-o.b1+1,h=Math.max(f,a,r),g=0,u=[],c=[],h===f)for(l=d=o.r1,M=o.r2;d<=M;l=d+=1){for(p=0,s=m=o.g1,B=o.g2;m<=B;s=m+=1)for(e=b=o.b1,Q=o.b2;b<=Q;e=b+=1)p+=t[n(l,s,e)]||0;g+=p,u[l]=g}else if(h===a)for(s=v=o.g1,I=o.g2;v<=I;s=v+=1){for(p=0,l=y=o.r1,T=o.r2;y<=T;l=y+=1)for(e=w=o.b1,P=o.b2;w<=P;e=w+=1)p+=t[n(l,s,e)]||0;g+=p,u[s]=g}else for(e=C=o.b1,_=o.b2;C<=_;e=C+=1){for(p=0,l=x=o.r1,j=o.r2;x<=j;l=x+=1)for(s=k=o.g1,z=o.g2;k<=z;s=k+=1)p+=t[n(l,s,e)]||0;g+=p,u[e]=g}return u.forEach(function(t,o){return c[o]=g-t}),i=function(t){var e,n,r,i,s,a,h,l,f,p,d;for(a=t+"2",h=p=o[s=t+"1"],d=o[a];p<=d;h=p+=1)if(u[h]>g/2){for(e=o.copy(),n=o.copy(),i=(l=h-o[s])<=(f=o[a]-h)?Math.min(o[a]-1,~~(h+f/2)):Math.max(o[s],~~(h-1-l/2));!u[i];)i++;for(r=c[i];!r&&u[i-1];)r=c[--i];return e[a]=i,n[s]=e[a]+1,[e,n]}},h===f?i("r"):h===a?i("g"):h===r?i("b"):void 0}},s.prototype.quantize=function(t,n){var s,a,c,h,u,l,f=this;if(!t.length||n<2||n>256)return console.log("invalid arguments"),!1;for(c=r(t),s=e(t,c),(u=new PriorityQueue(function(t,o){var e,n;return(e=t.count())>(n=o.count())?1:e<n?-1:0})).push(s),(h=function(t,o){var e,n,r,a,h;for(a=1,h=0;h<f.maxIterations;)if((s=t.pop()).count()){if(e=(r=i(c,s))[0],n=r[1],!e)return void console.log("cbox1 not defined; shouldn't happen");if(t.push(e),n&&(t.push(n),a++),a>=o)return;if(h++>f.maxIterations)return void console.log("infinite loop; perhaps too few pixels")}else t.push(s),h++})(u,this.fractByPopulations*n),l=new PriorityQueue(function(t,o){var e,n;return(e=t.count()*t.volume())>(n=o.count()*o.volume())?1:e<n?-1:0});u.size();)l.push(u.pop());for(h(l,n-l.size()),a=new o;l.size();)a.push(l.pop());return a},s}.call(this),function(){window.ColorExtract=function(){function t(){}return t.getColorMap=function(t,o,e,n,r,i){var s,a,c,h,u,l,f,p,g,d;for(null==i&&(i=8),c=t.getContext("2d").getImageData(o,e,n,r).data,h=[],l=f=e,g=e+r;f<g;l=f+=1)for(a=l*n*4,u=p=o,d=o+n;p<d;u=p+=1)s=a+4*u,h.push([c[s],c[s+1],c[s+2]]);return(new MMCQ).quantize(h,i)},t.colorDist=function(t,o){var e;return(e=function(t){return t*t})(t[0]-o[0])+e(t[1]-o[1])+e(t[2]-o[2])},t.extract=function(o,e,n){var r,i,s,a,c,h,u,l,f,p,g,d,m;for(e.width=25,e.height=25,e.getContext("2d").drawImage(o,0,0,e.width,e.height),(i=t.getColorMap(e,0,0,e.width,e.height,4).cboxes.map(function(t){return{count:t.cbox.count(),rgb:t.color}})).sort(function(t,o){return o.count-t.count}),r=i[0].rgb,(u=t.getColorMap(e,0,0,o.width,o.height,10).cboxes.map(function(t){return{count:t.cbox.count(),rgb:t.color}})).sort(function(t,o){return o.count-t.count}),l=0,p=0,d=u.length;p<d;p++)s=u[p],(a=t.colorDist(r,s.rgb))>l&&(l=a,c=s.rgb);for(l=0,g=0,m=u.length;g<m;g++)s=u[g],(a=t.colorDist(r,s.rgb))>l&&s.rgb!==c&&(l=a,h=s.rgb);return n({bgColor:(f=function(t){return"rgb("+t[0]+", "+t[1]+", "+t[2]+")"})(r),fgColor:f(c),fgColor2:f(h)})},t}()}.call(this),function(t){var o=function(){return t("html").hasClass("editmode")};t(".langmenu-with-popup").each(function(){var o=t(this).find(".langmenu-popup");t(this).find(".langmenu-content").click(function(){return o.show(),t(document).bind("click",function(e){t.contains(o.get(0),e.target)||(o.hide(),t(this).unbind("click",arguments.callee))}),!1})}),t("a.news-older-show").click(function(){return t(this).addClass("no-bg"),t(".news-older-hidden").show(),!1}),t(".mobile-menu-arr").click(function(o){t(o.target).closest("li").toggleClass("open")});var e=function(){t(document).ready(function(){t(".comment-form").hasClass("form_with_errors")?t("html, body").scrollTop(t(".comment-form").offset().top):t("form").find(".form_error, .form_notice").length>0&&t("html, body").scrollTop(t(".form_error, .form_notice").closest("form").offset().top)})},n=function(o,e){return function(o,e){if(o&&e){"string"==typeof o&&(o=o.replace(/rgba?\(/,"").replace(/\)/,"").split(","),t.each(o,function(t,e){o[t]=+e})),"string"==typeof e&&(e=e.replace(/rgba?\(/,"").replace(/\)/,"").split(","),t.each(e,function(t,o){e[t]=+o})),"object"==typeof o&&o.hasOwnProperty("length")&&3==o.length&&o.push(1),"object"==typeof e&&e.hasOwnProperty("length")&&3==e.length&&e.push(1);var n=[0,0,0,0];return n[3]=1-(1-e[3])*(1-o[3]),0===n[3]&&(n[3]=1e-6),n[0]=Math.min(e[0]*e[3]/n[3]+o[0]*o[3]*(1-e[3])/n[3],255),n[1]=Math.min(e[1]*e[3]/n[3]+o[1]*o[3]*(1-e[3])/n[3],255),n[2]=Math.min(e[2]*e[3]/n[3]+o[2]*o[3]*(1-e[3])/n[3],255),t.map(n,function(t){return Math.floor(t)})}}(o||[255,255,255,1],e||[255,255,255,1])},r=function(o){void 0!==o&&(o>.6?t("body").addClass("light-background").removeClass("dark-background"):t("body").addClass("dark-background").removeClass("light-background"))};getPhotoByWidth=function(t,o){for(var e,n,r=null,i=t.length;i--;)e=t[i].width-o,t[i].thumbnail&&"medium"===t[i].thumbnail||!(!r||n<0&&e>=0||(n>=0&&e>=0||n<0&&e<0)&&Math.abs(e)<Math.abs(n))||(r=t[i].url,n=e);return r},getPhotoByHeight=function(t,o){for(var e,n,r=null,i=t.length;i--;)e=t[i].height-o,t[i].thumbnail&&"medium"===t[i].thumbnail||!(!r||n<0&&e>=0||(n>=0&&e>=0||n<0&&e<0)&&Math.abs(e)<Math.abs(n))||(r=t[i].url,n=e);return r},t("html").on("click",".voog-search-modal",function(t){t.stopPropagation()}),t("html").click(function(){t(".js-popover").hasClass("expanded")&&t(".js-popover").removeClass("expanded"),t(".js-modal-overlay").hasClass("active")&&t(".js-modal-overlay").removeClass("active")});var i,s=function(){t(window).on("load",function(){a(),t(".content-body").children().length<1&&0===t(".content-body").text().trim().length&&t(".content-body").hide()}),t(window).on("resize",a),e()},a=function(){clearTimeout(i),i=setTimeout(function(){var o=parseInt(t(".content-left .content-header").parent().css("height")),e=parseFloat(t(".content-right").css("padding-top"));o+=parseInt(t(".content-left .news").parent().css("height")),t(".content-right").css("min-height",o-2*e),t(".frontpage-cover-image").removeClass("hidden"),t(".frontpage-cover-color").removeClass("hidden")},200)};t(".js-search-btn").click(function(o){o.stopPropagation(),t(this).toggleClass("open"),t(".js-search").toggleClass("active"),t(".js-modal-overlay").hasClass("active")&&t(".js-search-input").focus()}),t(".js-modal-overlay").on("click","form",function(t){t.stopPropagation()});var c,h;window.site=t.extend(window.site||{},{initBlogPage:function(){},initArticlePage:function(){e()},initCommonPage:function(){e()},initFrontPage:s,handleColorScheme:r,getCombinedLightness:function(t,o){var e=n(t,o);return Math.round((.2126*+e[0]+.7152*+e[1]+.0722*+e[2])/2.55)/100},handleHeaderColorScheme:function(o){void 0!==o&&(o>.6?t(".header-wrapper").addClass("light").removeClass("dark"):t(".header-wrapper").addClass("dark").removeClass("light"))},getPhotoByWidth:getPhotoByWidth,getPhotoByHeight:getPhotoByHeight,bindCustomTexteditorStyles:function(t){window.edy=window.edy||[],edy.push(["texteditorStyles",{name:t,tagname:"a",attribute:{href:"#"},classname:"custom-btn",toggle:!0}])}}),t(".menu-lang").find(".menu").change(function(){var o=t(this).find(":selected");window.location=o.val(),t(this).prev().text(o.text())}),t(".mobile-menu-btn").click(function(){t(this).toggleClass("open"),t(".mobile-menu-main").toggleClass("expanded")}),r(),t("html").click(function(){t(".mobile-lang-menu-popover").hasClass("expanded")&&t(".mobile-lang-menu-popover").removeClass("expanded")}),s(),o()||t(".content-formatted table").wrap('<div class="table-container overthrow"></div>'),t(".search-input").on("keyup",function(o){$input=t(o.target),27!=o.keyCode&&$input.val()&&($input.parent().find(".search-submit").hide(),$input.parent().find(".search-clear").show())}),t(".search-form").on("click",".search-clear",function(o){var e=t(o.target).closest(".search-form");e.removeClass("not-empty").find(".search-input").focus().val(""),t(o.target).hide(),t(".voog-search-modal").removeClass("search-results-active"),e.find(".search-submit").show(),e.find("input").blur()}),t(window).on("resize",function(){t(window).innerWidth()>752&&(t(".mobile-menu-btn").removeClass("open"),t(".mobile-menu-main").removeClass("expanded"))}),!Modernizr.flexbox&&o()&&(c=t(".js-header").width(),h=t(".js-header-right").width(),t(".js-header-left").css("min-width",c-h))}(jQuery);